<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Sistema de Tarefas</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Olá! Bem-vindo à Página de Tarefas!</h1>
            <div class="acoes">
                <h2>O que você deseja realizar?</h2>

                <form id="actions-form">
                    <button class="action-buttons" type="submit">Cadastrar tarefas</button>
                    <button class="action-buttons" type="submit">Editar tarefas</button>
                    <button class="action-buttons" type="submit">Listar tarefas</button>                        
                </form>          
            </div>
        
        <section class="hidden" id="Cadastrar">
            <h2>Cadastro de Tarefas</h2>

            <form method="POST" action="salvar.php">
                <input type="hidden" name="id" value="<?= isset($tarefa) ? $tarefa->getId() : '' ?>">

                <label for="titulo">Título:</label>
                <input type="text" name="titulo" id="titulo" required value="<?= isset($tarefa) ? $tarefa->getTitulo() : '' ?>">

                <label for="descricao">Descrição:</label>
                <textarea name="descricao" id="descricao" rows="4"><?= isset($tarefa) ? $tarefa->getDescricao() : '' ?></textarea>

                <label for="prioridade">Prioridade:</label>
                <select name="prioridade" id="prioridade">
                    <option value="baixa" <?= isset($tarefa) && $tarefa->getPrioridade() === 'baixa' ? 'selected' : '' ?>>Baixa</option>
                    <option value="media" <?= isset($tarefa) && $tarefa->getPrioridade() === 'media' ? 'selected' : '' ?>>Média</option>
                    <option value="alta" <?= isset($tarefa) && $tarefa->getPrioridade() === 'alta' ? 'selected' : '' ?>>Alta</option>
                </select>

                <br><br>
                <button type="submit" class="btn">Salvar</button>
                <?php if (isset($tarefa)): ?>
                    <a href="index.php" class="btn">Cancelar</a>
                <?php endif; ?>
            </form>
        </section>

        <section class="hidden" id="Editar">

        </section>

        <section class="hidden" id="Listar">
            <h2>Lista de Tarefas</h2>
            <table>
                <thead>
                    <tr>
                        <th>Selecionar</th>
                        <th>ID</th>
                        <th>Título</th>
                        <th>Descrição</th>
                        <th>Prioridade</th>
                    </tr>
                </thead>
                <tbody>
                    <?php foreach ($tarefas as $tarefa): ?>
                         <tr>
                            <td>
                                <input type="radio" name="selecionado" value="<?= $tarefa->getId() ?>">
                            </td>
                            <td><?= $tarefa->getId() ?></td>
                            <td><?= htmlspecialchars($tarefa->getTitulo()) ?></td>
                            <td><?= htmlspecialchars($tarefa->getDescricao()) ?></td>
                            <td><?= ucfirst($tarefa->getPrioridade()) ?></td>
                        </tr>
                    <?php endforeach; ?>
                </tbody>
            </table>
        </section>
    </div>
</body>